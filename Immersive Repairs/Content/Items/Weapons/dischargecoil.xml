<?xml version="1.0" encoding="utf-8"?>
<Override>
    <Items>
        <Item name="" identifier="dischargecoil" tags="dischargecoil" category="Machine,Weapon" Scale="0.5">
            <Sprite texture="Content/Items/Weapons/Turrets.png" depth="0.01" sourcerect="557,945,464,76" />
            <ElectricalDischarger duration="0.25" outdoorsonly="true" powerconsumption="10000">
                <Attack targetimpulse="50">
                    <Affliction identifier="stun" strength="8" />
                    <Affliction identifier="burn" strength="10" />
                </Attack>
                <StatusEffect type="OnUse" target="This">
                    <sound file="Content/Items/Weapons/WEAPONS_electricalDischarge1.ogg" range="20000" selectionmode="random" />
                    <sound file="Content/Items/Weapons/WEAPONS_electricalDischarge2.ogg" range="20000" />
                    <ParticleEmitter particle="risingbubbles" anglemin="0" anglemax="360" particleamount="50" velocitymin="50" velocitymax="100" scalemin="1" scalemax="2" />
                    <Explosion range="5000.0" camerashake="5" stun="0" force="0.0" flames="false" shockwave="false" sparks="true" underwaterbubble="false" />
                </StatusEffect>
                <StatusEffect type="OnUse" target="This" condition="-2.5" disabledeltatime="true" comparison="And">
                    <Conditional HiddenInGame="eq false" />
                    <Conditional noninteractable="eq false" />
                    <Conditional nonplayerteaminteractable="eq false" />
                </StatusEffect>
                <!-- spawn a random effect item every ~15 seconds if the discharge coil health is below 25% -->
                <StatusEffect type="Always" target="This" interval="14.9" SpawnItemRandomly="True" comparison="And">
                    <Conditional condition="lte 25" />
                    <Conditional noninteractable="eq false" />
                    <!-- 18/20 chance to do nothing -->
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_none" spawnposition="ThisInventory" />
                    <!-- 2/20 chance to electrocute nearby characters -->
                    <SpawnItem identifier="effect_shortcircuit" spawnposition="ThisInventory" />
                    <SpawnItem identifier="effect_shortcircuit" spawnposition="ThisInventory" />
                </StatusEffect>
            </ElectricalDischarger>
            <ConnectionPanel selectkey="Action" canbeselected="true" msg="ItemMsgRewireScrewdriver" hudpriority="10">
                <GuiFrame relativesize="0.2,0.32" minsize="400,350" maxsize="480,420" anchor="Center" style="ConnectionPanel" />
                <RequiredItem items="screwdriver" type="Equipped" />
                <input name="power_in" displayname="connection.powerin" />
                <input name="trigger_in" displayname="connection.turrettriggerin" />
                <output name="condition_out" displayname="connection.conditionout" />
            </ConnectionPanel>
            <Repairable selectkey="Action" header="electricalrepairsheader" deteriorationspeed="0.0" mindeteriorationdelay="120" maxdeteriorationdelay="720" mindeteriorationcondition="0" RepairThreshold="99" fixDurationHighSkill="5" fixDurationLowSkill="25" msg="ItemMsgRepairScrewdriver" hudpriority="10">
                <GuiFrame relativesize="0.2,0.16" minsize="400,180" maxsize="480,280" anchor="Center" relativeoffset="0.0,0.27" style="ItemUI" />
                <RequiredSkill identifier="electrical" level="55" />
                <RequiredItem items="screwdriver" type="Equipped" />
                <StatusEffect type="OnFailure" target="This" targetlimbs="LeftHand,RightHand" AllowWhenBroken="true">
                    <SpawnItem identifier="effect_shortcircuit" spawnposition="ThisInventory" />
                    <Sound file="Content/Sounds/Damage/Electrocution1.ogg" range="1000" />
                    <Explosion range="100.0" force="1.0" flames="false" shockwave="false" sparks="true" underwaterbubble="false">
                        <Affliction identifier="stun" strength="4" />
                        <Affliction identifier="shocked" strength="4" />
                        <Affliction identifier="burn" strength="5" />
                    </Explosion>
                </StatusEffect>
                <ParticleEmitter particle="damagebubbles" particleburstamount="2" particleburstinterval="2.0" particlespersecond="2" scalemin="0.5" scalemax="1.5" anglemin="0" anglemax="359" velocitymin="-10" velocitymax="10" mincondition="0.0" maxcondition="50.0" />
                <ParticleEmitter particle="MistSmoke" particlespersecond="60" anglemin="0" anglemax="360" distancemin="0" distancemax="30" velocitymin="0" velocitymax="20" mincondition="0.0" maxcondition="50.0" />
                <ParticleEmitter particle="spark" particleburstamount="5" particlespersecond="5" anglemin="0" anglemax="359" velocitymin="100" velocitymax="500" particleburstinterval="2" scalemin="0.5" scalemax="1" mincondition="0.0" maxcondition="15.0" />
                <ParticleEmitter particle="fleshsmoke" particlespersecond="2" scalemin="1" scalemax="2" mincondition="0.0" maxcondition="50.0" />
            </Repairable>
            <ItemContainer canbeselected="false" drawinventory="false" allowdraganddrop="false" selectkey="Use" capacity="1" maxstacksize="1" hideitems="true">
                <Containable items="effect" />
            </ItemContainer>
            <Upgrade gameversion="0.10.0.0" scale="*0.5" />
        </Item>
    </Items>
</Override>
